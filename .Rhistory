source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
labs(linetype = "Aktion", shape = "", )
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
labs(linetype = "Aktion", shape = "")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
labs(linetype = "Aktion", shape = "", colour = "white")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white"), legend.key = element_rect(fill='springgreen')) +
labs(linetype = "Aktion", shape = "")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
labs(linetype = "Aktion", shape = "")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ), size = 3, color = "white") +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ), color = "white") +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
labs(linetype = "Aktion", shape = "", )
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ), size = 3, color = "white") +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ), color = "white") +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
labs(linetype = "Aktion", shape = "")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white"), legend.key = element_rect(fill = "white", colour = "black")) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white"), legend.key = element_rect(fill = "white", colour = "white")) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white"), legend.key = element_text(colour = "white")) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white"), legend.key = element_rect(color = "white")) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white"), legend.key = element_rect(inherit.blank  = TRUE)) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white"), legend.key.text = element_text(color  = "white")) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
theme(legend.key = element_blank()) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
guides(shape=guide_legend(override.aes=list(colour="white"))+
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
guides(shape=guide_legend(override.aes=list(colour="white"))) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
guides(shape = guide_legend(override.aes=list(colour="white"))) +
guides(linetype = guide_legend(override.aes=list(colour="white"))) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
guides(shape = guide_legend(override.aes = list(color = "white"))) +
guides(linetype = guide_legend(override.aes = list(color = "white"))) +
labs(shape = "", linetype = "Aktion")
blogdown:::insert_image_addin()
blogdown:::serve_site()
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
guides(shape = guide_legend(override.aes = list(color = "white"))) +
guides(linetype = guide_legend(override.aes = list(color = "white"))) +
labs(shape = "", linetype = "Aktion")
blogdown:::insert_image_addin()
blogdown:::serve_site()
library(tidyverse)
library(dbplyr)
library(DBI)
library(glue)
library(ggtext)
library(patchwork)
con <- DBI::dbConnect(RSQLite::SQLite(), dbname = "~/Documents/Blog/Data/data_wc.sqlite")
matches <- tbl(con, "matches") %>%
filter(match_id == "843548") %>%
collect()
DBI::dbDisconnect(con)
match_ids <- matches$match_id
con <- DBI::dbConnect(RSQLite::SQLite(), dbname = "~/Documents/Blog/Data/data_wc.sqlite")
events <- tbl(con, "events") %>%
filter(match_id == match_ids) %>%
collect()
last_event <- events %>%
filter(period == "SecondHalf" & type_name == "End" ) %>%
tail(1)
end_time <- last_event$minute + last_event$second/60
shots <- events %>%
filter(isShot == 1)
DBI::dbDisconnect(con)
distance_from_pos <- function(x_pos, y_pos){
x_yards <- 104
y_yards <- 83.5
x_shift <- (100 - x_pos)*x_yards/100
y_shift <- abs(50 - y_pos)*y_yards/100
distance <- sqrt(x_shift*x_shift + y_shift*y_shift)
}
goal_available <- function(x_pos, y_pos){
x_yards <- 104
y_yards <- 83.5
lower_post_y <- 45.2
higher_post_y <- 54.8
goal_width <- (higher_post_y - lower_post_y)*y_yards/100
x_shift_lower <- (100 - x_pos)*x_yards/100
y_shift_lower <- abs(lower_post_y - y_pos)*y_yards/100
distance_lower <- sqrt(x_shift_lower*x_shift_lower + y_shift_lower*y_shift_lower)
x_shift_higher <- (100 - x_pos)*x_yards/100
y_shift_higher <- abs(higher_post_y - y_pos)*y_yards/100
distance_higher <- sqrt(x_shift_higher*x_shift_higher + y_shift_higher*y_shift_higher)
distance_near <- min(distance_lower, distance_higher)
cos_angle <- (distance_lower*distance_lower + distance_higher*distance_higher - goal_width*goal_width)/(2*distance_lower*distance_higher)
available <- sqrt(distance_near*distance_near + distance_near*distance_near - 2*distance_near*distance_near*cos_angle)
}
xg_model <- function(distance, available, header, penalty){
xg <- 4.172 - 2.353*log(distance) + 0.069*available - 0.648*header + 2.735*penalty
1/(1+exp(-xg))
}
shots_extended <- shots %>%
rowwise() %>%
mutate(distance = distance_from_pos(location_x, location_y)) %>%
mutate(available = goal_available(location_x, location_y)) %>%
mutate(header = if_else(str_detect(qualifiers, "Head"), 1, 0)) %>%
mutate(penalty = if_else(str_detect(qualifiers, "Penalty"), 1, 0)) %>%
mutate(minute_ext = minute + second/60) %>%
ungroup()
shots_xg <- shots_extended %>%
rowwise() %>%
mutate(xg = xg_model(distance, available, header, penalty)) %>%
ungroup() %>%
mutate(t_diff = c(NA, diff(minute_ext))) %>%
mutate(group = cumsum(coalesce(t_diff, 0) > 0.05)) %>%
group_by(group) %>%
mutate(xg_clean = max(xg)) %>%
ungroup() %>%
mutate(xg_clean = ifelse(xg_clean == xg, xg_clean, 0.0))
cum_xg <- shots_xg %>%
mutate(teamId = as.character(teamId)) %>%
group_by(teamId) %>%
mutate(cum_xg = cumsum(xg_clean)) %>%
select(minute_ext, teamId, playerId, cum_xg, isGoal) %>%
ungroup()
team_mapping <- list("336" = "Deutschland", "409" = "Brasilien")
#player_mapping <-
teams <- unique(cum_xg$teamId)
cum_xg_ext <- cum_xg %>%
add_row(minute_ext = 0, teamId = teams[[1]], playerId = NA, cum_xg = 0, isGoal = NA, .before = 1) %>%
add_row(minute_ext = 0, teamId = teams[[2]], playerId = NA, cum_xg = 0, isGoal = NA, .before = 1) %>%
add_row(minute_ext = end_time, teamId = teams[[1]], playerId = NA, cum_xg = max(cum_xg[cum_xg$teamId == teams[[1]], ]$cum_xg), isGoal = NA) %>%
add_row(minute_ext = end_time, teamId = teams[[2]], playerId = NA, cum_xg = max(cum_xg[cum_xg$teamId == teams[[2]], ]$cum_xg), isGoal = NA)
cum_xg_ext <- cum_xg_ext %>%
rowwise() %>%
mutate(team = team_mapping[[teamId]]) %>%
ungroup()
theme_set(theme_minimal())
xg_timeline <- ggplot(data = cum_xg_ext, aes(x = minute_ext, y = cum_xg, color = team)) +
geom_step() +
geom_point(data = cum_xg_ext[cum_xg_ext$isGoal==1,], aes(x = minute_ext, y = cum_xg, color = team)) +
scale_colour_manual(values = c("Brasilien" = "seagreen", "Deutschland" = "grey50")) +
scale_x_continuous(breaks = seq(from = 0, to = 90, by = 15)) +
geom_vline(xintercept = 45, linetype = "dotted", color = "gray", size = 0.5) +
annotate("text", x = 70, y = 1.1, colour = "seagreen", size = 2, label = "Brasilien erarbeitet fast den gesamten \n xG-Wert in der 2. Hälfte als das Spiel \n eigentlich schon gelaufen ist") +
annotate("text", x = 15, y = 1.75, colour = "grey50", size = 2, label = "Deutschland führt zur Pause 5:0 durch \n schnelle Tore zwischen Minute 11 und 29 \n mit einem summierten xG-Wert von 1.28") +
geom_curve(aes(x = 5, y = 1.5, xend = 20, yend = 1.0), arrow = arrow(length = unit(0.03, "npc")), colour = "grey50", size = 0.2 ) +
labs(x = "Spielminute",
y = "kumulative xG",
title = glue::glue("xG-Entwicklung und Shotmaps: <b style = 'color:seagreen'>Brasilien</b> - <b style = 'color:grey50'>Deutschland</b>"),
subtitle = "Halbfinale WM 2014: Estadio Mineirão, 8. Juli 2014") +
theme(axis.title.x = element_blank(), axis.title.y = element_blank()) +
theme(legend.position = 'none', plot.title = element_markdown())
source("pitch_plots.R")
library(png)
library(cowplot)
library(magick)
logo_file <- system.file("extdata", "germany.png", package = "cowplot")
shots_xg_de <- shots_xg %>%
filter(teamId == 336) %>%
filter(xg_clean >= 0.0001) %>%
mutate(isGoal = ifelse(is.na(isGoal), "No_Goal", "Goal"))
shots_xg_br <- shots_xg %>%
filter(teamId == 409) %>%
filter(xg_clean >= 0.0001) %>%
mutate(isGoal = ifelse(is.na(isGoal), "No_Goal", "Goal"))
shotmap_br <- create_opta_ShotMap(grass_colour = "#F9F9F9", line_colour = "#8F8F8F", background_colour = "#F9F9F9", goal_colour = "#000000") +
geom_point(data = shots_xg_br, aes(x = 100-location_y, y = location_x, color = xg_clean, shape = isGoal), size = 3) +
scale_colour_continuous("xG-Wert", type = "viridis", limits = c(0, 0.35)) +
scale_shape_manual(values = c("Goal" = "diamond", "No_Goal" = "circle"), guide=FALSE) +
theme(legend.position = c(0.15, 0.3), legend.key.size = unit(0.2, "cm"), legend.text=element_text(size = 6), legend.title = element_text(size = 8)) +
coord_fixed()
shotmap_de <- create_opta_ShotMap(grass_colour = "#F9F9F9", line_colour = "#8F8F8F", background_colour = "#F9F9F9", goal_colour = "#000000") +
geom_point(data = shots_xg_de, aes(x = 100-location_y, y = location_x, color = xg_clean, shape = isGoal), size = 3) +
scale_colour_continuous("xG-Wert", type = "viridis", limits = c(0, 0.35)) +
scale_shape_manual(values = c("Goal" = "diamond", "No_Goal" = "circle"), guide=FALSE) +
theme(legend.position = c(0.85, 0.3), legend.key.size = unit(0.2, "cm"), legend.text=element_text(size = 6), legend.title = element_text(size = 8), legend.box.just = "right") +
coord_fixed()
shotmap_br <- ggdraw(shotmap_br) +
draw_image("brazil.png", x = 0.9, y = 0.25, hjust = 1, vjust = 1, width = 0.1, height = 0.1)
shotmap_de <- ggdraw(shotmap_de) +
draw_image("germany.png", x = 0.2, y = 0.25, hjust = 1, vjust = 1, width = 0.1, height = 0.1)
xg_timeline / (shotmap_br + shotmap_de)
library(DT)
teams <- c("409" = "Brasilien", "336" = "Deutschland")
con <- DBI::dbConnect(RSQLite::SQLite(), dbname = "~/Documents/Blog/Data/data_wc.sqlite")
players <- tbl(con, "players") %>%
collect()
DBI::dbDisconnect(con)
players <- deframe(players)
event_scene <- events %>%
filter(minute == 28) %>%
filter(second >= 20 & second <= 49) %>%
rowwise() %>%
mutate(spieler = players[[as.character(playerId)]], mannschaft = teams[[as.character(teamId)]]) %>%
select(minute, second, location_x, location_y, type_name, outcome, isTouch, isGoal, isShot, spieler, mannschaft, Angle, Length, PassEndX, PassEndY) %>%
rename(Minute = minute, Sekunde = second, Spieler = spieler, Mannschaft = mannschaft, Ort_X = location_x, Ort_Y = location_y, Typ = type_name, Ergebnis = outcome, Ballberuehrung = isTouch, Tor = isGoal, Schuss = isShot, Winkel = Angle, Laenge = Length, End_Ort_X = PassEndX, End_Ort_Y = PassEndY) %>%
select(Minute, Sekunde, Spieler, Mannschaft, Typ, Ergebnis, Ballberuehrung, Tor, Schuss, Winkel, Laenge, Ort_X, Ort_Y, End_Ort_X, End_Ort_Y) %>%
ungroup()
test <- datatable(event_scene, rownames = FALSE, options = list(dom = 't', pageLength = 20, columnDefs = list(list(className = 'dt-center', targets = 0:14)), initComplete = JS("function(settings, json) {$(this.api().table().header()).css({'color' : 'black'});}"))) %>%
formatStyle(columns = names(event_scene), color="black")
test
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
guides(shape = guide_legend(override.aes = list(color = "white"))) +
guides(linetype = guide_legend(override.aes = list(color = "white"))) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
guides(shape = guide_legend(override.aes = list(color = "white"))) +
guides(linetype = guide_legend(override.aes = list(color = "white"))) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
guides(shape = guide_legend(override.aes = list(color = "white"))) +
guides(linetype = guide_legend(override.aes = list(color = "white"))) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
guides(shape = guide_legend(override.aes = list(color = "white"))) +
guides(linetype = guide_legend(override.aes = list(color = "white"))) +
labs(shape = "", linetype = "Aktion")
source("pitch_plots.R")
from_csv <- read_csv("goal_scene.csv", col_types = cols())
event_scene_fixed <- event_scene %>%
rowwise() %>%
mutate(Ort_X = if_else(Mannschaft == "Deutschland", abs(100-Ort_X), Ort_X)) %>%
mutate(Ort_Y = if_else(Mannschaft == "Deutschland", abs(100-Ort_Y), Ort_Y))
create_opta_Pitch(grass_colour = "#224C56", line_colour =  "#B3CED9", background_colour = "#224C56", goal_colour = "#15393D", arcs = FALSE) +
geom_point(data = from_csv %>% filter(Point == 1), aes(x = Ort_X, y = Ort_Y, shape = Typ, color = Mannschaft), size = 3) +
geom_segment(data = from_csv %>% filter(Line == 1), aes(x = Ort_X, y = Ort_Y, xend = End_Ort_X, yend = End_Ort_Y, linetype = Typ, color = Mannschaft)) +
scale_shape_manual(values = c("Balleroberung" = "circle", "Zweikampf" = "diamond")) +
scale_linetype_manual(values = c("Pass" = "solid", "Dribbling" = "dotted", "Schuss" = "dashed", "Befreiungsschlag" = "1F")) +
theme(legend.position = c(0.65, 0.5), legend.key.size = unit(0.4, "cm"), legend.text=element_text(size = 7, color = "white"), legend.title = element_text(size = 8, color = "white")) +
guides(shape = guide_legend(override.aes = list(color = "white"))) +
guides(linetype = guide_legend(override.aes = list(color = "white"))) +
labs(shape = "", linetype = "Aktion")
